#%Module1.0
##
##	 intel compilers
##

set PackageName "Intel compilers"
if {! [info exists PackageVersion]} {
    set PackageVersion [file tail $ModulesCurrentModulefile]
}

set PackageHelp {
Hhe Intel compilers can be used like this:
C           icc
C++         icpc
Fortran     ifort

Some more information can be found on these webpages: 
Usage: https://www.hpc2n.umu.se/compilers/usage#Intel
Flags: https://www.hpc2n.umu.se/compilers/flags#Intel

Other pages which may be useful:
Libraries: https://www.hpc2n.umu.se/compilers/libraries
makefiles: https://www.hpc2n.umu.se/compilers/makefiles
}

source "$siteTCL"

module-whatis "Intel compilers $PackageVersion"

set version [join [lrange [split $PackageVersion "."] 0 1] "."]

set icsversion "psxe_2015.0.0.022"
set ics_installversion ""

set cv "2015"
set csv ".0.090"

set gv gcc4.4

set		base		/lap/ics/$icsversion$ics_installversion/composer_xe_$cv$csv

setenv		INTEL_VERSION	$version

#module-load icslic

# Keep TBB and IPP settings before main compiler settings to reduce
# the common search cases for LD_LIBRARY_PATH

# TBB settings
set		tbbbase		$base/tbb

setenv		TBBROOT		$tbbbase
prepend-path	LD_LIBRARY_PATH	$tbbbase/lib/intel64/$gv
prepend-path	LIBRARY_PATH	$tbbbase/lib/intel64/$gv
prepend-path	MIC_LD_LIBRARY_PATH	$tbbbase/lib/mic
prepend-path	MIC_LIBRARY_PATH	$tbbbase/lib/mic
prepend-path	CPATH		$tbbbase/include

# IPP settings
set		ippbase		$base/ipp

setenv		IPPROOT		$ippbase
prepend-path	LD_LIBRARY_PATH	$ippbase/lib/intel64
prepend-path	LIBRARY_PATH	$ippbase/lib/intel64
prepend-path	MIC_LD_LIBRARY_PATH	$ippbase/lib/mic
prepend-path	NLSPATH		"$ippbase/lib/intel64/locale/%l_%t/%N"
prepend-path	INCLUDE		$ippbase/include
prepend-path	CPATH		$ippbase/include

# Main compiler settings
set		cbase		$base/compiler

# is this needed for MIC stuff perhaps?
#prepend-path	PATH		$base/mpirt/bin/intel64

prepend-path	PATH		$base/bin/intel64

# For MIC stuff?
prepend-path	LD_LIBRARY_PATH	$base/mpirt/lib/intel64

prepend-path	LD_LIBRARY_PATH	$cbase/lib/intel64
prepend-path	MIC_LD_LIBRARY_PATH	$base/mpirt/lib/mic
prepend-path	MIC_LD_LIBRARY_PATH	$cbase/lib/mic
prepend-path	LIBRARY_PATH	$cbase/lib/intel64
prepend-path	MANPATH		$base/man/en_US
prepend-path	NLSPATH		"$cbase/lib/intel64/locale/%l_%t/%N"

module-load-final __INTEL_LOADED_M

# ;;; Local Variables: ***
# ;;; mode:tcl ***
# ;;; End: ***
