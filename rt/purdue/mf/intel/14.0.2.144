#%Module1.0#####################################################################
##
## Intel 14.0.2.144 modulefile
##
proc ModulesHelp { } {
        global version modroot

        puts stderr "\tintel - Intel 14.0.2.144 Compilers (64-bit) for C/C++/Fortran"
}

module-whatis "compiler"

# for 64-bit compilation
set	iarch		intel64
set	asfx		_lp64
set	libsub		/lp64
set	cversion	composer_xe_2013_sp1.2.144

# for Tcl script use only
set	version		14.0.2.144
set	app		intel
set	intel		/apps/rhel6/intel
set	composer	$intel/$cversion
set	oclroot		$intel/opencl-1.2-3.2.1.16712
set	tbbroot		$composer/tbb
set	bindir		$composer/bin/$iarch
set	libdir		$composer/compiler/lib/$iarch
set	imkl		$composer/mkl
set	mkldir		$imkl/lib/$iarch
set	libdirs		"-L$libdir -L$mkldir"

set             link_lapack     "-lmkl_intel$asfx -lmkl_intel_thread -lmkl_core -liomp5 -lpthread -Xlinker -rpath -Xlinker $mkldir -Xlinker -rpath -Xlinker $libdir"

set		staticlibs	"$mkldir/libmkl_intel${asfx}.a $mkldir/libmkl_intel_thread.a $mkldir/libmkl_core.a"
set		link_lapack_static	"-Bstatic -Wl,--start-group $staticlibs -Wl,--end-group -Bdynamic -liomp5 -lpthread -Xlinker -rpath -Xlinker $libdir"

prepend-path	PATH		$oclroot/bin
prepend-path	PATH		$intel/vtune_amplifier_xe_2013/bin64
prepend-path	PATH		$intel/advisor_xe_2013/bin64
prepend-path	PATH		$intel/inspector_xe_2013/bin64
prepend-path	PATH		$bindir:/opt/intel/mic/bin

#prepend-path	MANPATH		$composer/man/en_US:/opt/intel/mic/share/man

prepend-path	MIC_LD_LIBRARY_PATH     $composer/compiler/lib/mic:$imkl/lib/mic:$tbbroot/lib/mic:/opt/intel/mic/coi/device-linux-release/lib:/opt/intel/mic/myo/lib:$oclroot/libmic

prepend-path	LD_LIBRARY_PATH	$libdir:$composer/mpirt/lib/intel64:$composer/ipp/lib/intel64:$mkldir:$tbbroot/lib/intel64:/opt/intel/mic/coi/host-linux-release/lib:/opt/intel/mic/myo/lib:$oclroot/lib64

prepend-path	LIBRARY_PATH	$libdir:$composer/ipp/lib/intel64:$mkldir:$tbbroot/lib/intel64

prepend-path    NLSPATH         "$composer/debugger/intel64/locale/%l_%t/%N"
prepend-path    NLSPATH         "$composer/ipp/lib/intel64/locale/%l_%t/%N"
prepend-path    NLSPATH         "$mkldir/locale/%l_%t/%N"
prepend-path    NLSPATH         "$libdir/locale/%l_%t/%N"

prepend-path	CPATH		$imkl/include:$tbbroot/include:$oclroot/include

setenv		CC		icc
setenv		CXX		icpc
setenv		FC		ifort
#setenv		F90		ifort

setenv		ICC_HOME	$composer
setenv		IFORT_HOME	$composer
setenv		MKL_HOME	$imkl
setenv		MKLROOT		$imkl
setenv		TBBROOT		$tbbroot
setenv		IPPROOT		$composer/ipp
setenv		IDB_HOME	$bindir

setenv		VTUNE_AMPLIFIER_XE_2013_DIR	$intel/vtune_amplifier_xe_2013

#setenv		INTEL_LICENSE_FILE 2839@optimus.rcac.purdue.edu,2839@soundwave.rcac.purdue.edu,2839@megatron.rcac.purdue.edu
setenv          INTEL_LICENSE_FILE 2839@charter.rcac.purdue.edu

setenv		LAPACK_INCLUDE	-I$imkl/include
setenv		LAPACK_INCLUDE_F95 -I$imkl/include/$iarch$libsub
setenv		LINK_LAPACK	"$libdirs $link_lapack"
setenv		LINK_LAPACK_STATIC "$libdirs $link_lapack_static"
setenv		LINK_LAPACK95	"$libdirs -lmkl_lapack95$asfx -lmkl_blas95$asfx $link_lapack"
setenv		LINK_LAPACK95_STATIC	"$libdirs -lmkl_lapack95$asfx -lmkl_blas95$asfx $link_lapack_static"

#if {[file executable /usr/site/rcac/sbin/log_usage]} {
#    exec /usr/site/rcac/sbin/log_usage $app $version
#}
#if {[file executable /usr/site/rcac/mod_notifications/notify_user]} {
#    catch {exec /usr/site/rcac/mod_notifications/notify_user $app $version [ module-info mode ] [ module-info specified ] } msg
#    if { [string length $msg ] > 0 } { puts stderr "$msg" }
#}
