#!/bin/bash
# -*- shell-script -*-

LMOD_PKG="@PKG@"
LMOD_DIR="@PKG@/libexec/"
LMOD_CMD="@PKG@/libexec/lmod"
MODULESHOME="@PKG@"
export LMOD_CMD
export LMOD_PKG
export LMOD_DIR
export MODULESHOME

################################################################################
# Certain machines (like Cray and MAC OS X at the time of this writing) define
# PAGER as less. But they do not set the LESS env. var.  Without setting LESS var, 
# the behavior is not ideal.  This should fix this.  Obviously we only set this
# if it is not defined.  That way we don't change the behavior of the user's setting.

if [ -z "$LESS" ]; then
  LESS=-XqeMRF
  export LESS
fi

#############################################################################
# As a safety measure, we will set LMOD_PAGER to be more, But allow the user
# or system to override it.

if [ -z "$LMOD_PAGER" ]; then
  LMOD_PAGER=more
  export LMOD_PAGER
fi  

module()
{
  eval `$LMOD_CMD bash "$@"`
}
export LMOD_DIR

clearMT()
{
  eval $($LMOD_DIR/clearMT_cmd bash)
}

########################################################################
#  ml is a shorthand tool for people who can't type moduel, err, module
#  It is also a combination command:
#     ml            -> module list
#     ml gcc        -> module load gcc
#     ml -gcc intel -> module unload gcc; module load intel
#  It does much more do: "ml --help" for more information.
ml()
{
  eval $($LMOD_DIR/ml_cmd "$@")
}
