<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Lmod Documentation</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Lmod</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Methods">Methods</a></li>
</ul>


<h2>Classes</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../classes/Banner.html">Banner</a></li>
  <li><a href="../classes/BeautifulTbl.html">BeautifulTbl</a></li>
  <li><a href="../classes/CTimer.html">CTimer</a></li>
  <li><strong>Cache</strong></li>
  <li><a href="../classes/ColumnTable.html">ColumnTable</a></li>
  <li><a href="../classes/Configuration.html">Configuration</a></li>
  <li><a href="../classes/Dbg.html">Dbg</a></li>
  <li><a href="../classes/Exec.html">Exec</a></li>
  <li><a href="../classes/Hook.html">Hook</a></li>
  <li><a href="../classes/MC_Access.html">MC_Access</a></li>
  <li><a href="../classes/MC_ComputeHash.html">MC_ComputeHash</a></li>
  <li><a href="../classes/MC_Load.html">MC_Load</a></li>
  <li><a href="../classes/MC_MgrLoad.html">MC_MgrLoad</a></li>
  <li><a href="../classes/MC_Refresh.html">MC_Refresh</a></li>
  <li><a href="../classes/MC_Show.html">MC_Show</a></li>
  <li><a href="../classes/MC_Spider.html">MC_Spider</a></li>
  <li><a href="../classes/MC_Unload.html">MC_Unload</a></li>
  <li><a href="../classes/MF_Base.html">MF_Base</a></li>
  <li><a href="../classes/MF_Lua.html">MF_Lua</a></li>
  <li><a href="../classes/MF_TCL.html">MF_TCL</a></li>
  <li><a href="../classes/MN_Between.html">MN_Between</a></li>
  <li><a href="../classes/MN_Latest.html">MN_Latest</a></li>
  <li><a href="../classes/MN_Match.html">MN_Match</a></li>
  <li><a href="../classes/MName.html">MName</a></li>
  <li><a href="../classes/MT.html">MT</a></li>
  <li><a href="../classes/Master.html">Master</a></li>
  <li><a href="../classes/MasterControl.html">MasterControl</a></li>
  <li><a href="../classes/ModuleStack.html">ModuleStack</a></li>
  <li><a href="../classes/Optiks.html">Optiks</a></li>
  <li><a href="../classes/Optiks_Option.html">Optiks_Option</a></li>
  <li><a href="../classes/Options.html">Options</a></li>
  <li><a href="../classes/Pkg.html">Pkg</a></li>
  <li><a href="../classes/PkgBase.html">PkgBase</a></li>
  <li><a href="../classes/PkgTACC.html">PkgTACC</a></li>
  <li><a href="../classes/ProgressBar.html">ProgressBar</a></li>
  <li><a href="../classes/Spider.html">Spider</a></li>
  <li><a href="../classes/Timer.html">Timer</a></li>
  <li><a href="../classes/Var.html">Var</a></li>
  <li><a href="../classes/string.html">string</a></li>
</ul>
<h2>Modules</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../modules/SitePackage.html">SitePackage</a></li>
  <li><a href="../modules/StandardPackage.html">StandardPackage</a></li>
  <li><a href="../modules/TermWidth.html">TermWidth</a></li>
  <li><a href="../modules/capture.html">capture</a></li>
  <li><a href="../modules/cmdfuncs.html">cmdfuncs</a></li>
  <li><a href="../modules/colorize.html">colorize</a></li>
  <li><a href="../modules/declare.html">declare</a></li>
  <li><a href="../modules/fileOps.html">fileOps</a></li>
  <li><a href="../modules/inherits.html">inherits</a></li>
  <li><a href="../modules/json.html">json</a></li>
  <li><a href="../modules/loadModuleFile.html">loadModuleFile</a></li>
  <li><a href="../modules/modfuncs.html">modfuncs</a></li>
  <li><a href="../modules/myGlobals.html">myGlobals</a></li>
  <li><a href="../modules/pager.html">pager</a></li>
  <li><a href="../modules/pairsByKeys.html">pairsByKeys</a></li>
  <li><a href="../modules/parseVersion.html">parseVersion</a></li>
  <li><a href="../modules/sandbox.html">sandbox</a></li>
  <li><a href="../modules/serializeTbl.html">serializeTbl</a></li>
  <li><a href="../modules/utils.html">utils</a></li>
</ul>
<h2>Scripts</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../scripts/addto.html">addto</a></li>
  <li><a href="../scripts/clearMT_cmd.html">clearMT_cmd</a></li>
  <li><a href="../scripts/computeHashSum.html">computeHashSum</a></li>
  <li><a href="../scripts/getmt.html">getmt</a></li>
  <li><a href="../scripts/lmod.html">lmod</a></li>
  <li><a href="../scripts/ml.html">ml</a></li>
  <li><a href="../scripts/processMT.html">processMT</a></li>
  <li><a href="../scripts/processModuleUsage.html">processModuleUsage</a></li>
  <li><a href="../scripts/reportUsers.html">reportUsers</a></li>
  <li><a href="../scripts/sh_to_modulefile.html">sh_to_modulefile</a></li>
  <li><a href="../scripts/spider.html">spider</a></li>
  <li><a href="../scripts/spiderCacheSupport.html">spiderCacheSupport</a></li>
</ul>

</div>

<div id="content">

<h1>Class <code>Cache</code></h1>
<p>This class reads all the cache files in.</p>
<p>  It will on occasion
 write a user cache file.  This is a singleton class.
<p> Rules: The rules about when to trust a cache file or not also when to
 write a cache file out in the user directory.
<p>   0.   Cache files are trusted to know what module files are in the
        MODULEPATH.  This means that if one adds a modulefile WITHOUT
        updating the cache, LMOD DOES NOT KNOW ABOUT IT!!!.  This is
        not a bug but a feature.
<p>   1.   A cache file can have a system timestamp associated with it.
        If it does then as long as the cache file is the same or newer
        then the timestamp then it is good forever.
   2.   A cache file without a timestamp is considered good for no more
        than "ancient" seconds old.  It is whatever was configured with
        Lmod. Typically "ancient" is 86400 seconds or 24 hours.
   3.   Modulefiles under system control can (should?) have a timestamp
        associated with but personal modulefiles typically do not.
   4.   Any PATH in MODULEPATH that are not covered by any modulefiles
        are walked.  If the time associated with building the cache file
        is short then no user cache file is written. Short is typically
        10 seconds and it is set at configure time.</p>


<h2><a href="#Methods">Methods</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#Cache:cache">Cache:cache (self, t)</a></td>
	<td class="summary">This is the front-end to the singleton ctor.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#Cache:build">Cache:build (self, fast)</a></td>
	<td class="summary">This is the client code interface to getting the cache
 files.</td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Methods"></a>Methods</h2>
    <dl class="function">
    <dt>
    <a name = "Cache:cache"></a>
    <strong>Cache:cache (self, t)</strong>
    </dt>
    <dd>
    This is the front-end to the singleton ctor.   It
 (obviously) constructs the static s_cache var once
 then serves s_cache to subsequent callers.  Since
 the MODULEPATH can change during execution, we set
 moduleDirT[path] to -1 for any we have not already
 processed.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">self</span>
         a Cache object
        </li>
        <li><span class="parameter">t</span>
         A table with possible dontWrite and quiet entries.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        A singleton Cache object.
    </ol>




</dd>
    <dt>
    <a name = "Cache:build"></a>
    <strong>Cache:build (self, fast)</strong>
    </dt>
    <dd>
    This is the client code interface to getting the cache
 files.   It is also responsible for writing the user cache
 file if it takes to long to build the cache data.  If the
 data already exists from previous calls then it just
 re-used.  If there are any directories that are not known
 then this function call on Spider:findAllModules() to build
 the cache data that is not known.
<p> If the time to rebuild the cache is quick (time < short) then
 the build time is recorded in the ModuleTable.  That way if
 it is quick, Lmod will report that it is rebuilding the spider
 cache the first time but not any other times during a login
 session.
<p> There is a hook function "writeCache" that gets called.
 There may be times when the cache file should never be written.
 For example, if you have a build machine where packages
 and modulefiles are being generated at random times then
 the cache file could be out-of-date.  So instead of trying
 to rebuild the cache file every second, just do not write it
 and live with slightly slower response time from Lmod.
<p> The "fast" option.  Lmod starts up in "fast" mode.
 This mode means that Lmod will try to read any cache files
 if it finds none, it doesn't try to build them, instead
 Lmod will walk only the directories in MODULEPATH and not
 spider everything.



    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">self</span>
         a Cache object
        </li>
        <li><span class="parameter">fast</span>
         if true then only read cache files, do not build them.
        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.2</a></i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
